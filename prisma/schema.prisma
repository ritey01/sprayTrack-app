generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider     = "mysql"
  url          = env("DATABASE_URL")
  relationMode = "prisma"
}

model Paddock {
  id           Int     @id @default(autoincrement())
  name         String  @db.VarChar(255)
  is_displayed Boolean   @default(true)
  sprayEvent   SprayEvent[]

  @@index([id])
}

model Crops {
  id           Int     @id @default(autoincrement()) @db.UnsignedInt
  name         String  @db.VarChar(50)
  is_displayed Boolean   @default(true)
  sprayEvent   SprayEvent[]

  @@index([id])
}

model SprayName {
  id           Int     @id @default(autoincrement()) 
  name         String  @db.VarChar(50)
  is_displayed Boolean   @default(true)
  sprays Spray[] 

 
  
}

model SprayMix {
  id           Int         @id @default(autoincrement())
  title        String
  is_displayed Boolean     @default(true)
  sprays     SprayMixSpray[]
  sprayEvent   SprayEvent[]

  @@index([id])
}

enum Unit{
  Litres
  mls
  Kgs
  grams
}

model Spray {
  id           Int         @id @default(autoincrement())
  rate         Int
  unit         Unit
  is_displayed Boolean   @default(true)
  sprayMixes SprayMixSpray[] 
  sprayName    SprayName  @relation(fields: [sprayNameId], references: [id])
  sprayNameId  Int
  

  @@index([sprayNameId])
}


model SprayMixSpray {
  id           Int         @id @default(autoincrement())
  spray          Spray         @relation(fields: [sprayId], references: [id])
  sprayId      Int
  sprayMix       SprayMix      @relation(fields: [sprayMixId], references: [id])
  sprayMixId   Int

  @@index([sprayId])
  @@index([sprayMixId])
}

model SprayEvent {
   id            Int      @id @default(autoincrement())
  date          String
  paddock       Paddock  @relation(fields: [paddockId], references: [id])
  paddockId     Int
  crop          Crops     @relation(fields: [cropId], references: [id])
  cropId        Int
  sprayMix     SprayMix @relation(fields: [sprayMixId], references: [id])
  sprayMixId   Int
  createdBy     String?
  createdAt     DateTime  @default(now())
  

  @@index([paddockId])
  @@index([cropId])
  @@index([sprayMixId])
}



